## [2.2.4](https://github.com/landoftherair/lotr2/compare/v2.2.3...v2.2.4) (2022-06-27)


### Bug Fixes

* **combat:** reflecting damage should not trigger outgoing effects ([c58764d](https://github.com/landoftherair/lotr2/commit/c58764de67856ca1b23713e98f08d2a768c66699))
* **command:** better limit control on [@si](https://github.com/si) ([6fab4e6](https://github.com/landoftherair/lotr2/commit/6fab4e61d81a783d5697579cda8a3bc9a2bbcc07))
* **core:** additional support for requireClass on teleports ([93975dc](https://github.com/landoftherair/lotr2/commit/93975dc7cc03050e40ef9ab0092f2f1e1474060c))
* **core:** challenge DR should be able to further scale based on lvl ([4bbe493](https://github.com/landoftherair/lotr2/commit/4bbe493c42c509651e438893c2ee011c1f3a9778))
* **core:** don't save grounds that don't exist ([fbb873e](https://github.com/landoftherair/lotr2/commit/fbb873e54a99d1ee343b5d4958d2f6c7a19e7000)), closes [#329](https://github.com/landoftherair/lotr2/issues/329)
* **core:** drink will take exact heal and exact heal regen bottles ([211c9ab](https://github.com/landoftherair/lotr2/commit/211c9ab35ee44b114d2b2cde042f5ff293619bcc))
* **core:** fix autoset for paid skill value ([cfc56c0](https://github.com/landoftherair/lotr2/commit/cfc56c05d2e398dad78300c0c92c1198d6fd5b0d))
* **core:** flagged skills sometimes being upset causes issues; closes [#327](https://github.com/landoftherair/lotr2/issues/327) ([9ff1aa8](https://github.com/landoftherair/lotr2/commit/9ff1aa824eebd63e7006ff9edb41550db06b4bc2))
* **core:** forgot PW email will remind you of your username and temp password ([05a128f](https://github.com/landoftherair/lotr2/commit/05a128fde6c169600a03a151f4c70c7cd199504e))
* **core:** isOwnedBy sometimes getting an item that has no mods ([1f1e821](https://github.com/landoftherair/lotr2/commit/1f1e82148a7e67098d841afd9728feca89d5789a)), closes [#334](https://github.com/landoftherair/lotr2/issues/334)
* **core:** prevent npc level from exceeding CR level range ([79807c5](https://github.com/landoftherair/lotr2/commit/79807c531168636ca21eb42908b3a0bcfe6069e8))
* **core:** rerolling a character will no longer tie the lockers incorrectly if the id is unspecified; also, it will create a new, correct instance if there is no id set ([f40cf44](https://github.com/landoftherair/lotr2/commit/f40cf44570a2cd846099c7ba1156648a5bf47957))
* **core:** rune scrolls with an empty restrict array should still work ([8a26f28](https://github.com/landoftherair/lotr2/commit/8a26f28e3c7040bd864114bde22959b6726eaa06))
* **core:** set allegiance defaults for all factions on create, closes [#331](https://github.com/landoftherair/lotr2/issues/331) ([737fbc1](https://github.com/landoftherair/lotr2/commit/737fbc18665f3328a1ecf1940985837629ab280a))
* **core:** taking items from a stack should not bind the entire stack ([d26755b](https://github.com/landoftherair/lotr2/commit/d26755bdb8c17a463a3dd7c81acda4eab561f420))
* **core:** thieves will no longer check current mp for hp-consuming spells ([44ba0ac](https://github.com/landoftherair/lotr2/commit/44ba0acd2c385956cb98c9e8671bc17681da37ff))
* **discord:** custom ori/solo items should show up correctly ([166bfe3](https://github.com/landoftherair/lotr2/commit/166bfe39ced2b67f707ff998264f0966e8444f80))
* **market:** gold listings were created but not assigned to any particular user; users will now be able to pick up gold for new listing purchases ([73abfdd](https://github.com/landoftherair/lotr2/commit/73abfdd94fb829b899d03457db0d81b054df5aba))
* **npc:** encruster will no longer let you encrust arrows ([d4c564b](https://github.com/landoftherair/lotr2/commit/d4c564b1e4b0414524b5f89d6b433c14bb0ff499))
* **npc:** encruster will not encrust transient items ([712b280](https://github.com/landoftherair/lotr2/commit/712b2803be8265fb104a1f2970e7764a576723bb))
* **npc:** healer trainer will not revive in twisting ether scenarios, due to thedanger ([30c7ff3](https://github.com/landoftherair/lotr2/commit/30c7ff32b72d578e498b25e69c612078ef25ce39))
* **npc:** train function has an extra safeguard ([bb3a00e](https://github.com/landoftherair/lotr2/commit/bb3a00e8e9a917cf7631735721e51e3966075cc6))
* **npc:** training npc would fail if null is given to the math functions ([b9f9bf8](https://github.com/landoftherair/lotr2/commit/b9f9bf8a5ddf2ef5a611794b77a556af730a33e6))
* **rngdungeon:** use allowHiddenWalls property, how did this get missed? ([65db146](https://github.com/landoftherair/lotr2/commit/65db146ad542e1decf09a525adb0697bb52b5c71))
* **solokar:** artificer will treat gloves and claws as weapons ([a3720a8](https://github.com/landoftherair/lotr2/commit/a3720a83288e3f187d1f5ae46fd984c7e387b7c4))
* **solokar:** gem selection will give a gem instead of telling you to pick something else ([ac02675](https://github.com/landoftherair/lotr2/commit/ac02675b374c6a78d1509c09b423cde22e90fa1b))
* **solokar:** make the game not refuse to load if no solokar items are in the drop table, just spit out a warning instead ([0be9fa9](https://github.com/landoftherair/lotr2/commit/0be9fa9295fef4dc888f9186ec7dd756a57a3401))
* **solokar:** mob density will be more spread out from now on ([f9d9f57](https://github.com/landoftherair/lotr2/commit/f9d9f577bfbc6a446f68c06b8f5553a2c4a0d3d0))
* **solokar:** remove all npcs before regenerating the map; may stop items from showing up on the ground ([a601fa3](https://github.com/landoftherair/lotr2/commit/a601fa3b220ba3f21895ddab1e7a801e8904c175))
* **spell:** barfire/barfrost have correct tooltips factoring in thermal barrier ([d5fc1e4](https://github.com/landoftherair/lotr2/commit/d5fc1e401ec2a51e57f1cf037ebe7ac5647f0d87))
* **spell:** distraction spell can only apply one distraction per person ([5492b09](https://github.com/landoftherair/lotr2/commit/5492b097994ff010055f3ff42c6535e97424042d))
* **spell:** findfamiliars now have darkvision ([12396ac](https://github.com/landoftherair/lotr2/commit/12396ac8cafcf2c803440a0c9187fa1529578dba))
* **spell:** imbueflame, combust, and volcanostance could work together to grant double kills in some cases ([9c85a29](https://github.com/landoftherair/lotr2/commit/9c85a2922c6017a101165dd303b7119ef8204289))
* **spell:** riftslash will not allow strange dual wield combos ([6730878](https://github.com/landoftherair/lotr2/commit/6730878c5fb216ad8013c3c1333fc76c75640694))
* **spell:** sweep should now properly ignore darkness and target a bunch of things randomly ([0130482](https://github.com/landoftherair/lotr2/commit/01304828fc4f79f041086179cbc84a6890a23c06))
* **spell:** wellspring will reset CD if it fails to cast ([fa92248](https://github.com/landoftherair/lotr2/commit/fa922480a72e6997dedc9bce64282df34633fa9e))
* **thief:** stealth has been renamed to energy ([298a41d](https://github.com/landoftherair/lotr2/commit/298a41de2d8615407b61b3105bd321c899858b93))
* **ui:** attempt to fix a substring crash ([8b4320f](https://github.com/landoftherair/lotr2/commit/8b4320fc0a69f100bab0956cb7c0e37004606c36))
* **ui:** cannot load a build that doesnt exist ([22a4d4a](https://github.com/landoftherair/lotr2/commit/22a4d4ae87257c3ba2144fe8aeef2b1017eb84c0))
* **ui:** clicking on previously-gray-tag enemies would not allow normal attack clicks to go through ([bb22bb7](https://github.com/landoftherair/lotr2/commit/bb22bb76c95e0db2029db26a3a2388342e869e02))
* **ui:** delete an error that I have no idea how to resolve otherwise ([0c8fdaa](https://github.com/landoftherair/lotr2/commit/0c8fdaa3e5a4c4720006bc1482c427d3094e2132))
* **ui:** desc text for items would not include both stats and mod stats, most notably when tanning a corpse ([3805afa](https://github.com/landoftherair/lotr2/commit/3805afa2b33de52e7d9d782633d31bd62b967be7))
* **ui:** fix situation in which desc text might throw an error ([a2e1fe8](https://github.com/landoftherair/lotr2/commit/a2e1fe8cc7e3c37fe4a1993b3a666aedd7925faa))
* **ui:** fix situation in which UI might throw an error getting binds prop from item ([cf7385a](https://github.com/landoftherair/lotr2/commit/cf7385a1e2bb252ce519fb968ca815ca3e37ba9b))
* **ui:** fix situation in which UI might throw an error getting items from ground/groups ([d797898](https://github.com/landoftherair/lotr2/commit/d797898a11b4b38118aa4564e9ad4760d4608507))
* **ui:** learnedspells should apply to macro disabling for default spells, too ([d0cd625](https://github.com/landoftherair/lotr2/commit/d0cd62551a58f82ba1ee0516aabae360e77edb31))
* **ui:** make teleport CTA more clear in teleport menu ([06d52be](https://github.com/landoftherair/lotr2/commit/06d52be4553a6d99d43a6d884392b8053ad8961c))
* **ui:** mat-select will wrap where needed ([1ff4c2c](https://github.com/landoftherair/lotr2/commit/1ff4c2cafca78b54f44fde0d38dda67a1062ac9e))
* **ui:** only display stealth effect for characters that are Hidden ([b25946d](https://github.com/landoftherair/lotr2/commit/b25946d1d96db8f3aa828984e66afb5291b5c052))
* **ui:** remove alwaysOnTop from traits ([f43c9bb](https://github.com/landoftherair/lotr2/commit/f43c9bb2b8a1e227bf03197ab1239fd8809040d5))
* **ui:** teleport menu and all menus that have > 5 options will now have options side by side in two columns instead of being one big column ([4763154](https://github.com/landoftherair/lotr2/commit/4763154bf65413f5842fadd5837bc4013fd55b9e))
* **ui:** TrapSet category should not be visible, and also not usable ([bb52f7f](https://github.com/landoftherair/lotr2/commit/bb52f7f7a63cbb3de6a1eb187dddbb5345fe5850))
* **ui:** ui sprites will now properly be transparent if they're hidden ([62579c6](https://github.com/landoftherair/lotr2/commit/62579c6d5df073b352dad4c3f39149d61e91e40d))
* **ui:** when anything dies, only reset target if the current target died ([8cc4fd1](https://github.com/landoftherair/lotr2/commit/8cc4fd1bd4562332b3c1b4b3b950d0753b25ccc7))
* **ui:** when focusing input, focus the end of the line, not the start ([10de881](https://github.com/landoftherair/lotr2/commit/10de881bcdae04fa9b5c4bc01493aac5192faf4a))


### Features

* **core:** add build manager ([1a36a5c](https://github.com/landoftherair/lotr2/commit/1a36a5c53df88426ed5e2e38ad98965b70637dcc))
* **core:** add thieves guild ([f2889c3](https://github.com/landoftherair/lotr2/commit/f2889c3e90aef15dced2b0b1050ff2c2771bf79e))
* **core:** challenge data includes xp, gold, which are auto assigned for most creatures ([26f45cc](https://github.com/landoftherair/lotr2/commit/26f45cc2f87d356da9c211d13e81c0c351cabb17))
* **core:** support loading damageFactor from CR, support loading HP from level ([f04a5f8](https://github.com/landoftherair/lotr2/commit/f04a5f8ddf598cc0f76a3520a2c4605ff5df148a))
* **debug:** add source maps to client ([5cca6a6](https://github.com/landoftherair/lotr2/commit/5cca6a6b97339d7dc8c37c69953b4f06405c972f))
* **gm:** [@item](https://github.com/item) will now create items on the ground if hands are full ([11faaf8](https://github.com/landoftherair/lotr2/commit/11faaf89e3105db1a929d82a82a756293f90257a))
* **gm:** add wallsight command ([3e254c6](https://github.com/landoftherair/lotr2/commit/3e254c66f837c37beb619f5f913d1ae1d803b3e4))
* **gm:** add wallwalk command ([3328ca3](https://github.com/landoftherair/lotr2/commit/3328ca30d96f25a6abd3eeca90c64e111a683c4c))
* **npc:** treasury pylon will give powerful or legendary gear always ([92a2145](https://github.com/landoftherair/lotr2/commit/92a2145d9b48da258d1194cd642c85e0aa51a852))
* **solokar:** allow map droptables to be added to from config ([2a578c9](https://github.com/landoftherair/lotr2/commit/2a578c99ec23f68de96e295438e1dc6536ea7148))
* **spell:** add caster to push where applicable/possible ([e2b0f0b](https://github.com/landoftherair/lotr2/commit/e2b0f0b07e74e268e0e5a25d263cee7e9f8197e7))
* **spell:** add gemsense ([619d047](https://github.com/landoftherair/lotr2/commit/619d0474c7a2e8d9ea87fd1ef9be8b5c3f36959b))
* **spell:** apply lasts 30 minutes by default ([432c3cd](https://github.com/landoftherair/lotr2/commit/432c3cd9bbb12054db3b8c90c791b69d777b0f80))
* **spell:** light lasts default 50% longer ([a071c7b](https://github.com/landoftherair/lotr2/commit/a071c7bc0bbee700633bc5d2eabf5a4afcfbc2fe))
* **spell:** teleport will show how many spaces are left when memorizing ([a539fa5](https://github.com/landoftherair/lotr2/commit/a539fa52fe5871c2ea0823adfd94cd0335a23bbe))
* **trait:** add bigger bottles ([34b5641](https://github.com/landoftherair/lotr2/commit/34b5641045102727f1909812df578ec0d9194db4))
* **trait:** add hidden healing, to boost hp regen while hidden ([cbfbff7](https://github.com/landoftherair/lotr2/commit/cbfbff74457f72cd791f2bb34e23cedf7b02869d))
* **trait:** new trait thief grip to boost outgoing dagger/ss damage ([232ba31](https://github.com/landoftherair/lotr2/commit/232ba315bd0ddeab4da51d95a35d521c2e03754f))
* **ui:** add training interface via &showcombatdebug ([3671b27](https://github.com/landoftherair/lotr2/commit/3671b2730f676086b7e85b1cc8c3028f876899dd))
* **ui:** allow custom CSS to be specified in options ([d9b8973](https://github.com/landoftherair/lotr2/commit/d9b8973de0e1241343d616b3dbeceb1dde0615e2))
* **ui:** can hold shift to learn a trait without confirmation dialog ([c3060f2](https://github.com/landoftherair/lotr2/commit/c3060f2886e12890ddbd573fa1c337dc54f33539))
* **ui:** creatures that can't see through your stealth are marked black/white; send perception to client so the math can be done ([bd23aac](https://github.com/landoftherair/lotr2/commit/bd23aacb074835653c556b266df25c60c38d42bd))
* **ui:** display level in active target selector ([309b122](https://github.com/landoftherair/lotr2/commit/309b1221106d475e58a91a8fa0caccea25aba2fd))
* **ui:** improve combat debug logging interface with quick resist info ([2b8b63d](https://github.com/landoftherair/lotr2/commit/2b8b63d8bb28c2adfcfdc9e3d0a978fdf0917e4a))



