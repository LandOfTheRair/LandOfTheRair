# [1.13.0](https://github.com/landoftherair/lotr2/compare/v1.12.5...v1.13.0) (2021-04-30)


### Bug Fixes

* **core:** better login process to prevent weird errors from a socket login ([ce86a90](https://github.com/landoftherair/lotr2/commit/ce86a90b7f5d7b2b41a741a7d5f100b233395d69))
* **core:** callbacks aren't guaranteed to exist ([dda5f15](https://github.com/landoftherair/lotr2/commit/dda5f159e5ea75c0ebecdf0187599a321c2e41ca))
* **core:** could not add coins to full sack ([c725cb1](https://github.com/landoftherair/lotr2/commit/c725cb145ed43671d5b45e21c494dd02ce037332))
* **core:** fix dupe login bug ([37d716c](https://github.com/landoftherair/lotr2/commit/37d716c5b2b07f87be1b20c76de40ef72b9d1573))
* **core:** login fubar issue addressed hopefully ([8b2adef](https://github.com/landoftherair/lotr2/commit/8b2adefc591f33e4ad13d4661d29fc3f07a39637))
* **core:** login works better ([cee0562](https://github.com/landoftherair/lotr2/commit/cee05629c2db92091f749442155ecafb2428a5bd))
* **core:** prevent registering while logged in ([bbe9886](https://github.com/landoftherair/lotr2/commit/bbe988626223ecfbf33406c666e02c3d3b0ab4a9))
* **core:** succor cannot go in locker or pouch ([dfd4b1d](https://github.com/landoftherair/lotr2/commit/dfd4b1d93a85a1304dd60b72a974ea09e21d6683))
* **effect:** can no longer remove permanently applied effects (from equipment etc) ([f9002df](https://github.com/landoftherair/lotr2/commit/f9002df307dbe48702252dac11831b08752f5a33))
* **item:** can pick up gold when sack is full ([101afa1](https://github.com/landoftherair/lotr2/commit/101afa1c7c9a419f4f46d139170266c53bba5a90)), closes [#132](https://github.com/landoftherair/lotr2/issues/132)
* **locker:** can no longer locker conjured items ([406a71b](https://github.com/landoftherair/lotr2/commit/406a71b2c6dcf5aa02bc8553732aced971e569d6))
* **locker:** lockers no longer take two items when withdrawing to hand ([0a85171](https://github.com/landoftherair/lotr2/commit/0a85171df1b899f19de27ac7979145a3697b7634))
* **locker:** lockers with a space in the name are removed as they do not work; names must be fixed ([1401d39](https://github.com/landoftherair/lotr2/commit/1401d39ea3399ce2430a9bdd26b249eb805e0df6))
* **npc:** alchemist had incorrect ounce combine value ([39645bf](https://github.com/landoftherair/lotr2/commit/39645bf8e64778fe8f6250fab6286867f5b5570f))
* **npc:** bought items have a fixed sell price so they can't game the system ([70e18b1](https://github.com/landoftherair/lotr2/commit/70e18b14da50f142ea57e68e7f16a2138bafabee))
* **npc:** items with a default sellValue can have CHA bonuses again ([df5beb9](https://github.com/landoftherair/lotr2/commit/df5beb9beb175fc6b4f905cd7a7938bc65de5760))
* **npc:** npc dialog fail should not throw errors if it is not present ([50da180](https://github.com/landoftherair/lotr2/commit/50da1801ff2da90f5e4957b307f58a3ef35266fa))
* **npc:** vendors with alternate currencies no longer can be bought with gold ([6ab6993](https://github.com/landoftherair/lotr2/commit/6ab69937fed7c476e2b0311ee627bdaf043ee092))
* **pouch:** conjured items do not fit in pouch ([b0ca635](https://github.com/landoftherair/lotr2/commit/b0ca6350da62e76ec49205207535a083a36b775a))
* **pouch:** succor items correctly remove from pouch when dragging to ground ([98a489a](https://github.com/landoftherair/lotr2/commit/98a489aabc22aed883a4fc8b6f51e948c8d1d2db))
* **rune:** fix error with runes being screwy if there wasn't anything in the slot before it ([9d472a3](https://github.com/landoftherair/lotr2/commit/9d472a383d4e415ef58a5db4f28e3e672f05b8c9))
* **spell:** ai cannot identify ([76eb73e](https://github.com/landoftherair/lotr2/commit/76eb73e82b11459d99996da2c72ab576d30ca4ba))
* **spell:** channeled spells can't be cancelled because ai are dumb ([d7f8707](https://github.com/landoftherair/lotr2/commit/d7f87071a754f9f63286674bd062132dedc90f7a))
* **spell:** cleave was able to attack anywhere on screen ([23b5579](https://github.com/landoftherair/lotr2/commit/23b557937edb8f1bb4ef3caf027f0a630520c367))
* **spell:** directional spells work again (darkness, firemist, icemist) ([109243e](https://github.com/landoftherair/lotr2/commit/109243e904e17eea8ed6bdab716b3dd8b785a468))
* **spell:** enemies can cast darkness gain ([0945ffc](https://github.com/landoftherair/lotr2/commit/0945ffcf244c6fb8fcb8d47e90912f54ae3ef9bf))
* **spell:** fate should have a min level requirement always ([b691526](https://github.com/landoftherair/lotr2/commit/b69152629964f4259efe6688f8c1e02a0cba8066))
* **spell:** find familiar cancels itself on subsequent casts ([4478fca](https://github.com/landoftherair/lotr2/commit/4478fcaf6da4c49e3ac18a6546ca09f5bd4f0833))
* **spell:** identify should run optional check on callbacks ([108af69](https://github.com/landoftherair/lotr2/commit/108af6966ee4ba72753da4687e0e463a08bfcb57))
* **spell:** lots of attacks directly dealt damage instead of doing a magical attack ([3448c91](https://github.com/landoftherair/lotr2/commit/3448c91cd63dd0d7cab8766a8be51f81ce6be626))
* **spell:** memorize shouldn't say youve been stunned ([22f101a](https://github.com/landoftherair/lotr2/commit/22f101a755d29c7b5fe6a15375bc881758322955))
* **spell:** rift slash should work from any distance ([60a9f9e](https://github.com/landoftherair/lotr2/commit/60a9f9e10f37832110e9e6bc5f8071e9e5495e67))
* **spell:** shadowmeld breaks on any agro generated ([e65ad97](https://github.com/landoftherair/lotr2/commit/e65ad97f589601bef4aa021d83f960db4fb19510))
* **steal:** steal can no longer be used from a distance ([3d12242](https://github.com/landoftherair/lotr2/commit/3d12242b1d5b87547bfbdafed7ed168567fe5443))
* **trait:** stances are now canceled when resetting traits ([dd359c6](https://github.com/landoftherair/lotr2/commit/dd359c671bc4cbe8b01b88c90fb415c014415ae2))
* **ui:** '.' to repeat last command should not be stored in history ([3f999fa](https://github.com/landoftherair/lotr2/commit/3f999fac222d777222a3292d1bfd2bd13c8e3d44))
* **ui:** add nice popup for no teleport locations memorized ([89dcf8b](https://github.com/landoftherair/lotr2/commit/89dcf8b6021b2c35d2bd82e9366b42dce67c0498))
* **ui:** auto join would not scroll lobby down all the way ([b4c1a07](https://github.com/landoftherair/lotr2/commit/b4c1a075ce8ccff345b1d3e2bc08517dd5d2c8f5))
* **ui:** bank would sometimes ignore you having 0 gold and say nothing ([63ba195](https://github.com/landoftherair/lotr2/commit/63ba1951c65ca50ed1bff6aa449875b20ba6f3d5))
* **ui:** command line toggle enter was being screwy ([469c81b](https://github.com/landoftherair/lotr2/commit/469c81b439a489f92729243af6d76f991022661d))
* **ui:** dark should work correctly now ([1dbd9b6](https://github.com/landoftherair/lotr2/commit/1dbd9b6f083e6d41d27040e95bcfd7f0bb1eea47))
* **ui:** disable login/register if no server connection ([3e73489](https://github.com/landoftherair/lotr2/commit/3e73489241c73b3ac6832c218d0520de1478b232))
* **ui:** enter toggles the cmd focus again ([f45dc1c](https://github.com/landoftherair/lotr2/commit/f45dc1cdc8e848e8c818f50740f906686f58d579))
* **ui:** error when trying to show coin but assets not loaded ([829a0e2](https://github.com/landoftherair/lotr2/commit/829a0e23ddf0ae264a05ef95fb76c03a0f25e4ea))
* **ui:** fix autologin ([714f75b](https://github.com/landoftherair/lotr2/commit/714f75bfd435e95227334e87feabe0d029ec8071))
* **ui:** fix jittery macro bar picker ([6bf6cf9](https://github.com/landoftherair/lotr2/commit/6bf6cf994cfdd5d3b348b40c9f515f21b168c474))
* **ui:** fix npc dialog ([9a1b667](https://github.com/landoftherair/lotr2/commit/9a1b6672e4ce11f75853efaff52ebafc42c73c42))
* **ui:** if event has no stats, dont show the stat area ([2e15123](https://github.com/landoftherair/lotr2/commit/2e15123d6286fa0a714ce4e4ebf3e85ce08706f6))
* **ui:** improve command line toggle interaction ([515b72b](https://github.com/landoftherair/lotr2/commit/515b72b0aa622686a7edb71cece4a61bb54d9d45))
* **ui:** improve performance of equipment component ([3b6a4d2](https://github.com/landoftherair/lotr2/commit/3b6a4d2dd68670859fc4fd9b9cfeb34dbe887bfb))
* **ui:** king sprite would not show up in modals since it was id 0 ([0ff18fa](https://github.com/landoftherair/lotr2/commit/0ff18fae9eec9cde00b89da30c09c692aba1a431))
* **ui:** remove alignment from ui ([07b0bf9](https://github.com/landoftherair/lotr2/commit/07b0bf9f980bfd357b251511b8e546172df0819c))
* **ui:** sort options should be null by default, not false ([ad52a72](https://github.com/landoftherair/lotr2/commit/ad52a720e347406fe0358cbfc3c8b9834a2c2c93))
* **ui:** terrain needs to be a png instead of webp ([f51953b](https://github.com/landoftherair/lotr2/commit/f51953b106a5f2bfa30a1f01a423b509170370db))
* **ui:** ui arg parsing was incorrect for directionals ([e1532f6](https://github.com/landoftherair/lotr2/commit/e1532f6353d0b9189a8f15074235669a62da6951))


### Features

* **ai:** add damageTaken proc for ai; add training dummy ([6d6d705](https://github.com/landoftherair/lotr2/commit/6d6d705833d8c93056f60c94cc238937ffe89d42))
* **boss:** add crazed sedgwick ai ([4262628](https://github.com/landoftherair/lotr2/commit/4262628ec808673cab30e02384fe9bfdfe85bece))
* **command:** add popup for forgetting ([b6957ff](https://github.com/landoftherair/lotr2/commit/b6957ffaaeb028bddc8aaeb314847f23e99cc027))
* **command:** mug now will not work with a 2h weapon ([a7e3f9a](https://github.com/landoftherair/lotr2/commit/a7e3f9a5a8450c399580da79036526ac1eeb1158))
* **core:** add db indexes ([027573c](https://github.com/landoftherair/lotr2/commit/027573cf9eaea645c985e11ba64500a8a5201a7f))
* **core:** add threat multiplier stat ([cc0b8aa](https://github.com/landoftherair/lotr2/commit/cc0b8aa438e1778636efb898ba8c7e939321141a))
* **core:** can go past map skill cap slowly ([fd257c5](https://github.com/landoftherair/lotr2/commit/fd257c59aaba9855bca7f00d3ca478051bdce103))
* **core:** map no longer limits xp ([9a49926](https://github.com/landoftherair/lotr2/commit/9a49926f55cc371b45803176ee0aa0a321ee82ed))
* **effect:** add remaining effects ([ad6a322](https://github.com/landoftherair/lotr2/commit/ad6a3220114ccba696982e980450f8fc8018e6f8))
* **events:** add dynamic event system ([edbaa1d](https://github.com/landoftherair/lotr2/commit/edbaa1d864ff872d8c8f53d6f4da09ea3375f7da))
* **gm:** add examine creature command ([f1abe1d](https://github.com/landoftherair/lotr2/commit/f1abe1d88f10bd5fc1b2dbe4ef078d5606681390))
* **lair:** add crazed tonwin ([0bccc00](https://github.com/landoftherair/lotr2/commit/0bccc001aa9f04d31b2638d65d72734b3fd574db))
* **lair:** add ranata ([e6e5f31](https://github.com/landoftherair/lotr2/commit/e6e5f3157be5171bb2f6ae1be7ff8a0facd2e770))
* **npc:** add npc sending messages in combat ([8e020c1](https://github.com/landoftherair/lotr2/commit/8e020c13035e282ee0508bf4cc00cb29c21338cf))
* **npc:** added invulnerable npc effect ([937226a](https://github.com/landoftherair/lotr2/commit/937226a9c801a7eaae436b0e3a9d8b5d2249023d))
* **npc:** green npcs now respawn faster ([fe69f38](https://github.com/landoftherair/lotr2/commit/fe69f3889689456ead183b912918041c0c2b92c8))
* **npc:** npc dialog can now check for no item in hand ([a540f31](https://github.com/landoftherair/lotr2/commit/a540f3160112a9accb0a281cc613f013ac93bdea))
* **quest:** quests can now reward reputation ([eb8e47c](https://github.com/landoftherair/lotr2/commit/eb8e47c15c4cc99d0d7e7f2e073625ea2e59270f))
* **skill:** add basic monster skills ([6fcb5cf](https://github.com/landoftherair/lotr2/commit/6fcb5cfc3330b4ae55231c022a029b3a1a9a626b))
* **skill:** add frost dragon bite; fix chill bites ([6b14fda](https://github.com/landoftherair/lotr2/commit/6b14fda6be70c79cb5e365350a9f4971e53f6f2a))
* **spell:** add reincarnate ([393549a](https://github.com/landoftherair/lotr2/commit/393549ad6ca65f6110d9cf9fa8f5545b189ddb9d))
* **spell:** can right click cancel songs ([4a721b6](https://github.com/landoftherair/lotr2/commit/4a721b602ec45d3cc8333b5d842bbe1da89af8d5))
* **spell:** charge is granted by default to all players ([6f9990d](https://github.com/landoftherair/lotr2/commit/6f9990df8ffc01580fc5d699060b09772388cb80))
* **spell:** stances can be cancelled by recasting ([33a85f5](https://github.com/landoftherair/lotr2/commit/33a85f5f6fe6ae3987ffab8009335451f053c04f))
* **spell:** teleport pops up a menu ([f1a087b](https://github.com/landoftherair/lotr2/commit/f1a087bf527d775a2174d731340429c263d5e812))
* **trait:** add familiar fists ([1783036](https://github.com/landoftherair/lotr2/commit/1783036202853d2c3a0a4afb4436e1e483858eba))
* **trait:** add familiar fortitude ([ccc87ad](https://github.com/landoftherair/lotr2/commit/ccc87ad25f47b3c089994084ef3df2c2d1e7fc6e))
* **trait:** add familiar strength ([5f27ace](https://github.com/landoftherair/lotr2/commit/5f27acef69e28cd099d4c28ea4ae8bcf84ad49e2))
* **trait:** add holiday traits ([b05b1e7](https://github.com/landoftherair/lotr2/commit/b05b1e7a11fb50d1fb32f38ce09cba81bce17452))
* **trait:** added defensive voice, shielding voice, reflecting voice ([2895fee](https://github.com/landoftherair/lotr2/commit/2895feeea7d7e626ad21feba176510267515863d))
* **ui:** add 'dont attack grey' option, on by default ([ab6698c](https://github.com/landoftherair/lotr2/commit/ab6698c17a05de9a609982fb7a318421d038005e))
* **ui:** can now verify and change your email ([aceea2c](https://github.com/landoftherair/lotr2/commit/aceea2c057b6c3b0b3f6816140237df7a858c004)), closes [#124](https://github.com/landoftherair/lotr2/issues/124)
* **ui:** can request a temporary password for logging in ([4dd42be](https://github.com/landoftherair/lotr2/commit/4dd42be261cd2187b0b24d5051c6ef8a2f334aef))
* **ui:** even if healer cannot train you he will offer to recall you ([b2798be](https://github.com/landoftherair/lotr2/commit/b2798beeda845728af9cd41fd680e18bfaaf8d1b))
* **ui:** healer trainer will offer to recall if you talk to him ([d046627](https://github.com/landoftherair/lotr2/commit/d046627fdab1ed64ced79afa4aafcd8246dbae01))
* **ui:** highlight stairs and doors ([562373a](https://github.com/landoftherair/lotr2/commit/562373aaf451fd8fee8391115e0e11fc69aec308)), closes [#67](https://github.com/landoftherair/lotr2/issues/67)
* **ui:** server can now request input directly from client; add memorize popup ([6a35619](https://github.com/landoftherair/lotr2/commit/6a356199cb3278ca432df40f1fa49305a3f93ec3))
* **ui:** use webps for all spritesheets to reduce size significantly ([412b959](https://github.com/landoftherair/lotr2/commit/412b95910aad2812597d346e8d19dddd8d63b427))
* **ui:** validation codes have a limited number of attempts and expire after an hour, closes [#137](https://github.com/landoftherair/lotr2/issues/137) ([6850ce7](https://github.com/landoftherair/lotr2/commit/6850ce774e2cdfa67e520a6531ef327943b9ccdc))
* **world:** add tower of selen ([05e42da](https://github.com/landoftherair/lotr2/commit/05e42da46e04450a9484345cf542bc4d4e6e7296))



